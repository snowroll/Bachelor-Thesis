<!DOCTYPE html>
<html lang="zxx">

<head>
	<title>Home</title>
	<!-- Meta tag Keywords -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8" />
	<meta name="keywords" content="" />
	<script>
		addEventListener("load", function () {
			setTimeout(hideURLbar, 0);
		}, false);

		function hideURLbar() {
			window.scrollTo(0, 1);
		}
	</script>
	<!-- //Meta tag Keywords -->

	<!-- Custom-Files -->
	<link rel="stylesheet" href="css/bootstrap.css">
	<!-- Bootstrap-Core-CSS -->
	<link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
	<!-- Style-CSS -->
	<link href="css/font-awesome.min.css" rel="stylesheet">
	<!-- Font-Awesome-Icons-CSS -->
	<!-- //Custom-Files -->

	<link rel="stylesheet" href="js/codemirror/codemirror.min.css">
	<script src="js/codemirror/htmlmixed.min.js"></script>
	<script src="js/codemirror/codemirror.min.js"></script>
	<script src="js/codemirror/code_css.min.js"></script>
	<script src="js/codemirror/code_javascript.min.js"></script>
	<script src="js/codemirror/code_xml.min.js"></script>
	<script src="js/codemirror/code_closetag.min.js"></script>
	<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
	<script src="js/codemirror/code_closebrackets.min.js"></script> 
	<script src="js/Deobfuscate/simplifier.js"></script>

	<!-- Web-Fonts -->
	<link href="http://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&amp;subset=devanagari,latin-ext"
	 rel="stylesheet">
	<!-- //Web-Fonts -->
</head>

<body>
		<style>
			body{min-height:300px;background: #f6f6f6;}.container{width:98%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}.CodeMirror{min-height:300px;;font-family: Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace;}#textareaCode{min-height:300px}#iframeResult{display: block;overflow: hidden;border:0!important;min-width:100px;width:100%;min-height:300px;background-color:#fff}@media screen and (max-width:768px){#textareaCode{height:300px}.CodeMirror{height:300px;font-family: Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace;}#iframeResult{height:300px}.form-inline{padding:6px 0 2px 0}}.logo h1{background-image:url(/images/logo-domain-white.png);background-repeat:no-repeat;text-indent:-9999px;width:160px;height:39px;margin-top:10px;display:block}
		</style>
	<!-- main banner -->
	<div class="main-top" id="home">
		<!-- header -->
		<header>
			<div class="container-fluid">
				<div class="header d-lg-flex justify-content-between align-items-center py-3 px-sm-3">
					<!-- logo -->
					<div id="logo">
						<h1><a href="deobfucation.html"><span class="fa fa-linode mr-2"></span>JS混淆代码反混淆</a></h1>
					</div>
					<!-- //logo -->
					<!-- nav -->
					<div class="nav_w3ls">
						<nav>
							<label for="drop" class="toggle">Menu</label>
							<input type="checkbox" id="drop" />
							<ul class="menu">
								<li><a href="deobfucation.html" class="active">反混淆</a></li>
								<li><a href="detect.html">检测</a></li>
								<li><a href="evaluation.html">评估</a></li>
							</ul>
						</nav>
					</div>
					<!-- //nav -->
					<div class="d-flex mt-lg-1 mt-sm-2 mt-3 justify-content-center">
						<!-- download 这里修改成添加文件-->
						<a class="dwn-w3ls btn" href="" target="_blank">  
							<span class="fa fa-save"></span>
						</a>
						<!-- //download -->
					</div>
				</div>
			</div>
		</header>
		<!-- //header -->


	<!-- services -->
	<div class="banner_w3lspvt bg-secondary py-5" id="services">
		<div class="container py-xl-5 py-lg-3">
				<div class="row">
     
						<div class="col-sm-6">
						<div class="panel panel-default"> 
							<div class="panel-heading">
								<form class="form-inline">
						  <div class="row">
							  <div class="col-xs-6">
								   <button type="button" onclick="resetCode()" class="btn btn-default">源代码：</button>
								</div>
								<div class="text-right">
								  <button type="button" class="btn btn-success" onclick="submitTryit()" id="submitBTN"><span class="glyphicon glyphicon-send"></span> 点击运行</button>
							  </div>
						  </div>
								</form>
							</div>
							<div class="panel-body">
								<textarea class="form-control"  id="textareaCode" name="textareaCode">Please Input your JS code;
								</textarea>
							</div>
						</div>
						</div>
					
						<div class="col-sm-6">
						<div class="panel panel-default"> 
							<div class="panel-heading"><form class="form-inline"> <button type="button" class="btn btn-default">运行结果</button></form></div>
							<div class="panel-body"><div id="iframewrapper"></div></div>
						</div>
						</div>
						
						</div>
		</div>
	</div>
	<!-- //services -->

	<!-- copyright bottom -->
	<div class="copy-bottom bg-li py-4 border-top">
		<div class="container-fluid">
			<div class="d-md-flex px-md-3 position-relative text-center">
				<!-- footer social icons -->
				<div class="social-icons-footer mb-md-0 mb-3">
					<ul class="list-unstyled">
						<li>
							<a href="#">
								<span class="fa fa-facebook"></span>
							</a>
						</li>
						<li>
							<a href="#">
								<span class="fa fa-twitter"></span>
							</a>
						</li>
						<li>
							<a href="#">
								<span class="fa fa-google-plus"></span>
							</a>
						</li>
						<li>
							<a href="#">
								<span class="fa fa-instagram"></span>
							</a>
						</li>
					</ul>
				</div>
				<!-- //footer social icons -->
				
				<!-- move top icon -->
				<a href="#home" class="move-top text-center">
					<span class="fa fa-level-up" aria-hidden="true"></span>
				</a>
				<!-- //move top icon -->
			</div>
		</div>
	</div>
	<!-- //copyright bottom -->

</body>
<script>
	var mixedMode = {
	name: "htmlmixed",
	scriptTypes: [{matches: /\/x-handlebars-template|\/x-mustache/i,
				mode: null},
				{matches: /(text|application)\/(x-)?vb(a|script)/i,
				mode: "vbscript"}]
	};
	var editor = CodeMirror.fromTextArea(document.getElementById("textareaCode"), {
		mode: mixedMode,
		selectionPointer: true,
		lineNumbers: true,
		matchBrackets: true,
		indentUnit: 4,
		indentWithTabs: true
	});

	window.addEventListener("resize", autodivheight);

	var x = 0;
	function autodivheight(){
		var winHeight=0;
		if (window.innerHeight) {
			winHeight = window.innerHeight;
		} else if ((document.body) && (document.body.clientHeight)) {
			winHeight = document.body.clientHeight;
		}
		//通过深入Document内部对body进行检测，获取浏览器窗口高度
		if (document.documentElement && document.documentElement.clientHeight) {
			winHeight = document.documentElement.clientHeight;
		}
		height = winHeight*0.68
		editor.setSize('100%', height);
		document.getElementById("iframeResult").style.height= height +"px";
	}
	function resetCode() {
		var initCode = "Please input your JS code"  
		editor.getDoc().setValue(initCode);		
		submitTryit();
	}

	function submitTryit() {
		var text = editor.getValue();
		// var de_ast = convert_ast(text);
		// alert(de_ast);
		// var de_code = simplifier(de_ast);
		// var patternHtml = /<html[^>]*>((.|[\n\r])*)<\/html>/im
		// var patternHead = /<head[^>]*>((.|[\n\r])*)<\/head>/im
		// var array_matches_head = patternHead.exec(text);
		// var patternBody = /<body[^>]*>((.|[\n\r])*)<\/body>/im;
		
		// var array_matches_body = patternBody.exec(text);
		var basepath_flag = 1;
		var basepath = '';
		if(basepath_flag) {
			basepath = '<base href="//www.runoob.com/try/demo_source/" target="_blank">';
		}
		// if(array_matches_head) {
		// 	text = text.replace('<head>', '<head>' + basepath );
		// } else if (patternHtml) {
		// 	text = text.replace('<html>', '<head>' + basepath + '</head>');
		// } else if (array_matches_body) {
		// 	text = text.replace('<body>', '<body>' + basepath );
		// } else {
		// 	text = basepath + text;
		// }
		var ifr = document.createElement("iframe");
		ifr.setAttribute("frameborder", "0");
		ifr.setAttribute("id", "iframeResult");  
		document.getElementById("iframewrapper").innerHTML = "";
		document.getElementById("iframewrapper").appendChild(ifr);
		
		var ifrw = (ifr.contentWindow) ? ifr.contentWindow : (ifr.contentDocument.document) ? ifr.contentDocument.document : ifr.contentDocument;
		ifrw.document.open();
		ifrw.document.write(de_code);  
		ifrw.document.close();
		autodivheight();
	}
	submitTryit();
	autodivheight();
</script>

</html>